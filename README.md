<div align="center">

[![Licence](https://img.shields.io/badge/License-MIT-brightgreen.svg)](https://github.com/pandaroux007/GoTime/blob/main/LICENCE.txt)
[![GitHub Release](https://img.shields.io/github/v/release/pandaroux007/GoTime?include_prereleases&style=flat&logo=auto&color=red&link=https%3A%2F%2Fgithub.com%2Fpandaroux007%2FGoTime%2Freleases)](https://github.com/pandaroux007/GoTime/releases)
[![Built with Python3](https://img.shields.io/badge/built%20with-Python3-yellow.svg)](https://www.python.org/)
![platforms](https://img.shields.io/badge/Platforms-Linux%20|%20Windows%20|%20Mac%20-purple.svg)
[![Commits](https://img.shields.io/github/commit-activity/t/pandaroux007/GoTime)](https://github.com/pandaroux007/GoTime/commits/main/)
[![Stars](https://img.shields.io/github/stars/pandaroux007/GoTime.svg?style=social&label=Stars)](https://github.com/pandaroux007/GoTime)
</div>

# Presentation
## Project
This project is a timer application that does not require an internet connection, which started on February 9, 2024 (originally intended for use in education, for educational institutions)

> ğŸ”— The code and all associated material for the project is on GitHub: [https://github.com/pandaroux007/GoTime](https://github.com/pandaroux007/GoTime), or on [the site](https://pandaroux007.github.io/gotime).
>
> ğŸª² For any bug reports or new feature suggestions, please create an [issue](https://github.com/pandaroux007/GoTime/issues).
> 
> ğŸš€ Find updates, changes and different versions in the file [CHANGELOG.md](CHANGELOG.md)

## License
This project is licensed under [MIT License](LICENSE.txt), selected according to the [Choose A License](https://choosealicense.com/licenses/mit/) website.
Find the details of this license on the official website: https://opensource.org/licenses/MIT.

## SpÃ©cification
- 64-bit application (no 32-bit for now)
- Developed in python3 and compiled *via* `nuitka`
___
## Installation
1. TÃ©lÃ©chargez la derniÃ¨re version de l'application au format zip, sur le site web du projet : https://pandaroux007.github.io/gotime (sur GitHub Ã  ce lien : https://github.com/pandaroux007/GoTime/releases)
2. DÃ©compressez le fichier zip, puis placez vous dans le dossier ainsi optenu.
### Sous Linux
(doit fonctionner sous debian et ses sous-distributions)
#### *Via* le terminal de commandes
1. Placez vous dans le repertoire dÃ©compressÃ© avec `cd` si ce n'est pas dÃ©jÃ  fait.
2. ExÃ©cutez la commande `chmod +x install.sh` pour autoriser l'exÃ©cution du fichier comme un programme.
3. Lancer le programme d'installation avec la commande `sudo ./install.sh` (pour le lancer en mode superutilisateur)

### Sous Microsoft Windows
1. Lancer le fichier d'installation `gotime-win-install.exe`, puis suivez les instructions.

### Sous MacOS-X
L'application n'est pas compilÃ©e sous Mac pour l'instant, vous pouvez l'exÃ©cuter depuis python3 si vous souhaitez l'utiliser (`python3 -m runApp.py`).

> [!WARNING]
> Potentielles incompatibilitÃ©s car l'application n'est pas testÃ©e sur cette plateforme!

## DÃ©sinstallation
### Sous Linux
CrÃ©ez un fichier `uninstall.sh`, puis copier coller ce script shell bash dedant.
```sh
#!/bin/bash

set -e # arrÃªte le script si une commande Ã©choue

# def des chemins
APP_NAME="GoTime"
INSTALL_DIR="/opt/$APP_NAME"
DESKTOP_FILE="/usr/share/applications/$APP_NAME.desktop"
# def des raccourcis pour les couleurs
COLOR_ERROR_RED="\e[1;31m"
COLOR_SUCCESS_GREEN="\e[1;32m"
COLOR_WARN_YELLOW="\e[1;33m"
COLOR_TERMINAL_DEFAULT="\e[0;0m"

# verif des droits root
if [ "$EUID" -ne 0 ]; then
    echo -e "${COLOR_ERROR_RED}ERREUR! Ce script doit Ãªtre exÃ©cutÃ© en tant que superutilisateur (utiliser la commande 'sudo ./install.sh')${COLOR_TERMINAL_DEFAULT}" && exit 1
fi

# supprimer le rÃ©pertoire d'installation
if [ -d "$INSTALL_DIR" ]; then
  rm -rf "$INSTALL_DIR" && echo ">> RÃ©pertoire d'installation supprimÃ© : $INSTALL_DIR"
else
  echo "${COLOR_WARN_YELLOW}WARNING! Le rÃ©pertoire d'installation n'existe pas : $INSTALL_DIR${COLOR_TERMINAL_DEFAULT}"
fi

if [ -f "$DESKTOP_FILE" ]; then
  rm "$DESKTOP_FILE" && echo ">> Fichier .desktop supprimÃ© : $DESKTOP_FILE"
else
  echo "${COLOR_WARN_YELLOW}WARNING! Le fichier .desktop n'existe pas : $DESKTOP_FILE${COLOR_TERMINAL_DEFAULT}"
fi

# mise Ã  jour de la base de donnÃ©es des applications
if command -v update-desktop-database > /dev/null 2>&1; then
    echo "Mise Ã  jour de la base de donnÃ©es des applis..."
    update-desktop-database
    echo ">> Mise Ã  jour de la base de donnÃ©es terminÃ©e!"
else
    echo -e "${COLOR_WARN_YELLOW}WARNING! update-desktop-database n'est pas disponible. Vous devrez peut-Ãªtre l'exÃ©cuter manuellement ou redÃ©marrer votre ordinateur pour ne plus voir le logiciel dans la liste des applications installÃ©es.${COLOR_TERMINAL_DEFAULT}"
fi

echo -e "${COLOR_SUCCESS_GREEN}SUCCESS! DÃ©sinstallation de $APP_NAME terminÃ©e avec succÃ¨s!${COLOR_TERMINAL_DEFAULT}"
# verif pour supprimer le script Ã  la fin
while true; do
    read -p "Voulez-vous supprimer ce script de dÃ©sinstallation ? [Y/n] " reponse
    reponse=$(echo "$reponse" | tr '[:upper:]' '[:lower:]')
    if [[ $reponse == "y" || $reponse == "yes" || $reponse == "" ]]; then
        echo "Suppression du script..." && rm "$0"
        echo ">> Script de dÃ©sinstallation supprimÃ©!" && exit 0
    elif [[ $reponse == "n" || $reponse == "no" ]]; then
        echo ">> OK - fin du script de dÃ©sinstallation de $APP_NAME" && exit 0
    else
        echo -e "${COLOR_WARN_YELLOW}Veuillez entrer 'Y' pour oui ou 'N' pour non.${COLOR_TERMINAL_DEFAULT}"
    fi
done
```
Une fois ceci fait, vous pouvez autoriser l'exÃ©cution du fichier comme un programme comme dÃ©crit dans le [chapitre Installation](#installation), puis le lancer avec la commande `sudo ./uninstall.sh`.

*Vous pouvez Ã©galement ouvrir votre explorateur de fichier en mode superutilisateur et supprimer manuellement le rÃ©pertoire d'installation dans `/opt/GoTime` et l'entrÃ©e du menu dÃ©marrer `/usr/share/applications/GoTime.desktop`*

### Sous Microsoft Windows
1. Fermez toutes les instances de l'application (toutes les fenetres)
2. Rendez-vous dans vos ParamÃ¨tres, puis dans le menu Application recherchez "*GoTime*" (si vous ne le trouvez pas c'est que l'application est dÃ©jÃ  dÃ©sinstallÃ©e - pour vous en assurer aller dans votre explorateur de fichier, dans `C:\Programmes (x86)` ou `C:\Programmes`, et regardez si le dossier *GoTime* existe.), puis cliquez sur dÃ©sinstaller.
___

## CrÃ©dits
1. Merci Ã  `Lounys` pour son aide sur le bug du bouton 'copier le lien' dans Source;
2. Merci Ã  `Solme` pour la nouvelle version du logo et son soutien pendant les longues phases de correction de bugs;
3. Merci Ã  `Roucoule/PandaR09` pour son aide au dÃ©but de mon apprentissage de tkinter et le module `customtkinter`;
4. Merci Ã  `Petitours` pour ses conseils sur l'ergonomie et pour le module `nuitka`;
5. Merci Ã  ma professeur d'anglais, qui a lancer l'idÃ©e et qui m'a fait confiance pour rÃ©aliser ce projet;
6. Merci Ã  tous les dÃ©veloppeurs des modules utilisÃ©s ici pour leurs travaux et leurs contributions Ã  la communautÃ© open-source;
7. Enfin, merci Ã  tous les crÃ©ateurs de contenus techniques sur internet.
___
# Apparence globale
## Interface
### Barre de Menu
Au niveau de la barre de menu, trois onglets :
  - **FenÃªtre** -> Propose des options pour l'interface et l'application;
    - *ParamÃ¨tres* -> Ouvre la fenÃªtre des paramÃ¨tres.
    - *RedÃ©marrer* -> RedÃ©marre l'application.
    - *Quitter* -> Ferme l'application.
  - **Commandes** -> Permet d'effectuer des actions;
    - *Effacer les entrÃ©es* -> Efface le temps actuellement entrÃ© dans les sÃ©lecteurs.
    - *DÃ©porter minuteur* -> Affiche le temps restant dans une nouvelle fenÃªtre.
  - **Source** -> Donne des informations sur l'application;
    - *Ouvrir GitHub* -> Ouvre directement le dÃ©pÃ´t GitHub dans le navigateur.
    - *Afficher GitHub* -> Ouvre une fenÃªtre affichant le lien vers le dÃ©pÃ´t GitHub, avec un bouton permettant de le copier.
    - *Afficher LICENCE* -> Affiche une fenÃªtre avec la licence du projet (voir le [chapitre LICENCE](#licence))
### FenÃªtre
Sur la fenÃªtre principale, est disponible, dans l'ordre :
- L'heure, en grand, en haut (possibilitÃ© de ne plus l'afficher dans les paramÃ¨tres)
- Un rectangle colorÃ© contenant le nom de l'application, puis le temps restant pendant le dÃ©compte.
- Trois boutons (LANCER, PAUSE, ARRÃŠTER).
- Un bouton pour dÃ©porter le temps restant dans une nouvelle fenÃªtre.
- Deux entrÃ©es (minutes/secondes) et un bouton pour les effacer rapidement.
L'application peut Ãªtre agrandie et mise en plein Ã©cran.

<p float="left">
  <img src="screenshots/gotime-light-screenshot.png" width="49%" alt="GoTime en mode clair" title="GoTime en mode clair"/>
  <img src="screenshots/gotime-dark-screenshot.png" width="49%" alt="GoTime en mode sombre" title="GoTime en mode sombre"/>
</p>
<p align="center">
  <em>Ã€ gauche : GoTime (v1.0.3-bÃªta ici) en mode clair | Ã€ droite : GoTime (v1.0.3-bÃªta ici) en mode sombre</em>
</p>

**DÃ©tails sur la dÃ©portation du temps restant** :
Comme indiquÃ© plus haut, sur la fenÃªtre se trouve un bouton permettant de "dÃ©porter le temps restant". ConcrÃ¨tement cela signifie ouvrir
une nouvelle fenÃªtre avec affichÃ© seulement le temps restant, sur un fond de couleur. Cette fenÃªtre Ã  l'avantage d'Ãªtre beaucoup plus
visible que l'affichage de l'application, mais aussi le fait qu'elle reste toujours au premier plan (mÃªme si vous cliquez Ã  cÃ´tÃ©, elle
restera apparente).
___
# DÃ©veloppement
## Installation des dÃ©pendances
Attention, **certains des modules utilisÃ©s par le projet ne sont pas inclus par dÃ©fauts dans python**. Pour les installer, il vous suffit de
lancer la commande suivante (aprÃ¨s vous Ãªtre dÃ©placÃ© dans le rÃ©pertoire du projet tÃ©lÃ©chargÃ© - commande '*cd path*' sous Windows et Unix):
```sh
pip install -r requirements.txt
```
Les modules listÃ©s dans ce fichier sont utilisÃ©s par l'application

## Fonctionnement
GoTime fonctionne avec la fonction `after` de `tkinter`. L'affichage de l'heure fonctionne de cette maniÃ¨re et le minuteur Ã©galement.
Cette mÃ©thode permet d'appeller une fonction un certain temps plus tard, temps dÃ©fini en ms, de maniÃ¨re non bloquante. Pour modifier chaque seconde l'heure, par exemple, on utilise cette commande
```py
self.after(1000, self.update_time)
```
Cela crÃ©e une boucle qui met Ã  jour l'heure toutes les 1000ms, soit 1s. **C'est le mÃªme principe qui est utilisÃ© pour le rafraichissement du minuteur.**
Pour ce qui est des paramÃ¨tres, l'application fonctionne grÃ¢ce Ã  une lecture/Ã©criture dans un fichier json ([settings.json](dep/settings.json)).
Tout le reste de l'application n'est qu'une question d'apparence et de widgets, la base fonctionne comme ceci.

## Bugs
Il y a un bug actuellement dÃ©couvert.
1. Le bug des antivirus sur Windows persiste et c'est l'un des plus gros problÃ¨mes de l'application. Cependant il est aussi trÃ¨s simple Ã  contourner : il suffit de dÃ©sactiver son antivirus le temps d'installer le logiciel et le rÃ©activer ensuite (ce qui prouve leur inutilitÃ© sur ce point). Je conseille d'utiliser la fonction "disable for 10mn" pour ne pas oublier ensuite de le rÃ©activer.

## Compilation & distribution
### Compilation avec Nuitka
Pour compiler et distribuer l'application, j'utilise [`nuitka`](https://github.com/Nuitka/Nuitka), avec cette commande :
```sh
python3 -m nuitka --run --onefile --output-filename="GoTime" --windows-console-mode=disable --follow-imports --enable-plugin=tk-inter --nofollow-import-to=pygame.tests --linux-icon="dep/icon.ico" --macos-app-icon="dep/icon.ico" --windows-icon-from-ico="dep/icon.ico" runApp.py
```
*Sous Windows, si un message d'erreur vous indique que python n'existe pas ou n'est pas reconnu ou autre, essayez de changer `python3` en `python` au dÃ©but de la commande.*

> [!CAUTION]
> **Attention, comme [les pirates informatiques utilisent beaucoup nuitka](https://github.com/Nuitka/Nuitka/issues/2701) pour compiler leurs virus, l'application a la mÃªme signature qu'un programme malveillant et se fait donc bloquer par les antivirus (testÃ©e sur [virustotal](https://www.virustotal.com/gui/home/upload), et considÃ©rÃ©e comme Ã©tant un cheval de troie par beaucoup, dont Avast)!**

**EDIT** : AprÃ¨s tests, il se trouve que l'ajout de `--mingw64` lors de la compilation sous Windows ne change rien, l'application et son installation se font toujours flaguer. Je conseille donc Ã  ceux qui installent l'application ou qui la compile **de dÃ©sactiver pour quelques minutes leurs antivirus**.

> [!NOTE]
> Installez nuitka avec `pip install nuitka`, puis installez l'utilitaire de compression d'exÃ©cutables si il n'est pas installÃ© (`pip install zstandard`), configurez le cache des fichiers `C` (ccache), puis lancez la commande indiquez plus haut.

### Distribution du logiciel
Comme indiquÃ© dans [le chapitre installation](#installation), l'application est distribuÃ©e de trois faÃ§on:
#### Sous Linux
- Utilisation de scripts shell bash ([install.sh](install.sh) et [uninstall.sh](#dÃ©sinstallation))
#### Sous Microsoft Windows
- Utilisation d'un installateur crÃ©Ã© *via* `Inno Setup`
#### Sous MacOS-X
- Pas de programme compilÃ© ni de script d'installation : les utilisateurs de machines Apple devrons utiliser la version python directement pendant une durÃ©e indÃ©terminÃ©e.